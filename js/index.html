<!-- Nome:
CPF:
RG:
Endereço: (auto preencher o endereço com base no CEP digitado)
Nº
E-mail:
Envio de arquivo: (pdf, doc, png)
Gravar a data e hora da inclusão do registro e exibir no form -->


<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de cliente</title>
    <link rel="stylesheet" href="estilos/style.css">
    <link rel="stylesheet" href="estilos/media-query.css">
</head>
<body>
    <main>

    <section id="login">
        
    <div id="imagem"></div>
    <h1>Cadastro de Clientes</h1>
    <label id="relogio"  onclick="mostrarHora()" >Hora Agora! </label>
    <div id="cadastro">
    <p>Olá, cadastra-se ou realize a busca!!</p>
    <h1>Buscar</h1>
    <input id="ibusca" type="text" name="nome" placeholder="Pesquise pelos seguintes metódos: Nome, RG e CPF">
            
    <form action="login.js" method="post" enctype="multipart/form-data" autocomplete="on">

        <input class="validacao" id="Nome" type="text" name="nome" placeholder="Digite seu nome..." required>
        <input class="validacao" id="cpf" type="text" name="CPF" placeholder="Digite o número do seu CPF...."required>
        <input class="validacao" id="RG" type="text" name="RG" placeholder="Digite o número do seu RG...."required>
        <input class="validacao" id="Cep" type="text" name="CEP" placeholder="Digite o seu CEP...." required>
        <input class="validacao" id="End" type="text" name="Endereco" placeholder="Seu endereço....">
        <input class="validacao" id="cidade" type="text" name="Endereco" placeholder="Sua cidade....">
        <input class="validacao" id="UF" type="text" name="Estado" placeholder="Seu Estado....">
        <input class="validacao" id="Num" type="text" name="numero" placeholder="Digite o Nº...">
        <input class="validacao" id="ilogin" type="email" name="login" placeholder="seu e-mail" autocomplete="email" required maxlength="60">
        <input class="validacao" type="file" name="arquivo" accept=".jpg, .jpeg, .png, .gif" required>
        <input id="enviar" type="submit" name="enviar-formulario" value="Enviar">

        
    </form>

        <script src="jquery-3.6.2.js"></script>
    <script>
            $(document).ready(function(){
                $("#Cep").blur(function(){
                let valor = $(this).val(); 
            $.ajax({
                url: "https://viacep.com.br/ws/" + valor + "/json/",
                type: "GET",
                success: function(dados, status){
                    $("#End").val(dados.logradouro);
                    $("#cidade").val(dados.localidade);
                    $("#UF").val(dados.uf);
                },
                error:function(){
                    alert('CEP incorreto, digite um CEP válido')
                }
            })
        })
      });
        const form = document.querySelector("form");
        form.addEventListener("submit", function(event) {
        event.preventDefault();

        const formatosPermitidos = ["png", "jpeg", "jpg", "gif"];
        const arquivo = document.querySelector('input[type="file"]').files[0];
        const extensao = arquivo.name.split(".").pop();
         if (formatosPermitidos.includes(extensao)) {
        console.log(extensao);
        }
        
        const validar = document.querySelector(".validacao").value;
        if(validar){
            console.log(validar);
            alert("Todos os campos preenchidos")
    
    }
});

const dozeHoras = 12;

const mostrarHora = function(){
    let relogio = document.getElementById('relogio');
   
    relogio.innerHTML = "00:00:00 AM!"


}

const mostrarForm = function()
{
    const agora = new Date();
    
    let t = agora.toLocaleTimeString('pt-PT', {hour12: false});
    document.getElementById('relogio').innerHTML = t;
    

    const texto_relogio = clock(horas, minutos, segundos)
  
    relogio.innerHTML = texto_relogio; 
    const relogio = document.getElementById('relogio');
  
};

    const clock = function(horas, minutos, segundos){
    relogio.innerHTML = texto_relogio;
    const relogio = document.getElementById('relogio');
    let meridiano = "AM";

    if (t >= dozeHoras)
    {
        meridiano = "PM";
    }

    if (t < 10)
    {
        t = '0' + t;
    }
    if (t < 10)
    {
        t = '0' + t;
    }
    if (t < 10)
    {
        t = '0' + t;
    }

    return horas + ':' + minutos + ':' + segundos + " " + meridiano + "!";

};


// const vinteQuatro = function(){
//         let d = new Date();
//         let t = d.toLocaleTimeString('pt-PT', {hour12: false});
//         document.getElementById('relogio').innerHTML = t;
//         intervalID =  setInterval(mostrarForm);
        
// }
// function validateCPF(cpf) {
  
//   cpf = cpf.replace(/[^\d]+/g, '');
//   if (cpf === '') return false;
  
//   if (cpf.length !== 11) return false;
  
//   if (/^(\d)\1{10}$/.test(cpf)) return false;
  
//   let sum = 0;
//   for (let i = 0; i < 9; i++) sum += parseInt(cpf.charAt(i)) * (10 - i);
//   let rest = 11 - (sum % 11);
//   if (rest === 10 || rest === 11) rest = 0;
//   if (rest !== parseInt(cpf.charAt(9))) return false;

//   sum = 0;
//   for (let i = 0; i < 10; i++) sum += parseInt(cpf.charAt(i)) * (11 - i);
//   rest = 11 - (sum % 11);
//   if (rest === 10 || rest === 11) rest = 0;
//   if (rest !== parseInt(cpf.charAt(10))) return false;
//   return true;
// }
    </script>
    </div>
    </section>
    </main>
</body>
</html>